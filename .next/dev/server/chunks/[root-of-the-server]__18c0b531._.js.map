{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/spencersmith/Documents/GitHub/CortisolTracker/app/api/chat/route.ts"],"sourcesContent":["import {\n  consumeStream,\n  convertToModelMessages,\n  streamText,\n  UIMessage,\n} from \"ai\"\n\nexport const maxDuration = 30\n\nexport async function POST(req: Request) {\n  const { messages }: { messages: UIMessage[] } = await req.json()\n\n  const result = streamText({\n    model: \"openai/gpt-4o-mini\",\n    system: `You are a friendly, knowledgeable cortisol health advisor named \"Cora\". You help users understand their cortisol levels and stress patterns.\n\nYour expertise includes:\n- Explaining cortisol's role in the body and the natural diurnal rhythm\n- Interpreting cortisol readings and what they mean at different times of day\n- Providing evidence-based lifestyle tips to manage cortisol (sleep hygiene, exercise timing, nutrition, breathing exercises, mindfulness)\n- Explaining how stress, caffeine, exercise, and sleep affect cortisol\n- Discussing the cortisol awakening response (CAR)\n- Helping users understand healthy cortisol ranges: Morning (10-20 mcg/dL), Midday (6-14), Afternoon (3-10), Evening (2-8), Night (1-5)\n\nGuidelines:\n- Keep responses concise and conversational (2-4 short paragraphs max)\n- Use simple language, avoid excessive medical jargon\n- Always remind users you're not a doctor when giving health advice\n- Be warm, encouraging, and supportive\n- If asked about specific medical conditions, recommend consulting a healthcare provider\n- Use bullet points for actionable tips\n- Reference time-of-day context when discussing cortisol levels`,\n    messages: await convertToModelMessages(messages),\n    abortSignal: req.signal,\n  })\n\n  return result.toUIMessageStreamResponse({\n    originalMessages: messages,\n    consumeSseStream: consumeStream,\n  })\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAOO,MAAM,cAAc;AAEpB,eAAe,KAAK,GAAY;IACrC,MAAM,EAAE,QAAQ,EAAE,GAA8B,MAAM,IAAI,IAAI;IAE9D,MAAM,SAAS,IAAA,oKAAU,EAAC;QACxB,OAAO;QACP,QAAQ,CAAC;;;;;;;;;;;;;;;;;+DAiBkD,CAAC;QAC5D,UAAU,MAAM,IAAA,gLAAsB,EAAC;QACvC,aAAa,IAAI,MAAM;IACzB;IAEA,OAAO,OAAO,yBAAyB,CAAC;QACtC,kBAAkB;QAClB,kBAAkB,uKAAa;IACjC;AACF"}}]
}